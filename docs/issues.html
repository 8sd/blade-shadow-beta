<!DOCTYPE HTML>
<!--
	Stellar by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Known issues - Shadow Linux Community</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

		<link rel="icon" type="image/png" href="images/logo.png" />

		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" href="assets/css/custom.css" />
		<link rel="stylesheet" href="assets/css/styles/color-brewer.css">

		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header" class="alt">
						<h1>Shadow tweaks</h1>
						<p>The Linux community for <a href="https://shadow.tech/" target="_blank">Shadow</a>.</p>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul>
							<li><a href="./#appimage">AppImage</a></li>
							<li><a href="./#vainfo">Setup your GPU</a></li>
							<li><a href="./#tool">Shadow tool</a></li>
							<li><a href="#" class="active">Known issues</a></li>
							<li><a href="tweaks.html">Tweaks</a></li>
							<li><a href="https://github.com/NicolasGuilloux/blade-shadow-beta" target="_blank">Our work on Github</a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Introduction -->
							<section id="intro" class="main special">
								<div class="spotlight">
									<div class="content">
										<header class="major">
											<h2>Known issues</h2>
										</header>
										<p>
											Especially on Linux, there are a lot of issues. This page describes well known issues, what is the cause and how to fix them when a workaround is available.
										</p>

										<ul style="list-style-type: none;">
											<li><a href="#gamepad" class="scrolly">The application do not detect my gamepad</a></li>
											<li><a href="#nvidia" class="scrolly">The NVIDIA issue and workaround for Optimus</a></li>
											<li><a href="#scroll" class="scrolly">The scroll is reversed</a></li>
											<li><a href="#strace" class="scrolly">The application crashed when I try to strace (AppImage)</a></li>
										</ul>
									</div>
								</div>
							</section>

						<!-- Application Issues -->
							<section class="main" id="gamepad">
								<div class="content">
									<header class="major">
										<h2>The application do not detect my gamepad</h2>
									</header>
									<p>
										Some gamepads are sometimes badly recognized by the Shadow app. As the developer team <b>needs</b> to know which gamepads are badly recognized, please send us a message on Discord and mention the brand and reference of your device so we can transfer this to the developpers.
									</p>

									<p>
										As a workaround if your gamepad is plugged via USB, you can use <a href="https://www.zerotier.com/" target="_blank">ZeroTier</a> + <a href="https://www.virtualhere.com/" target="_blank">VirtualHere</a> to use any device on your Shadow seemlessly. Find more <a href="tweaks.html#usb">here</a>.
									</p>
								</div>
							</section>

							<section class="main" id="nvidia">
								<div class="content">
									<header class="major">
										<h2>The NVIDIA issue and workaround for Optimus</h2>
									</header>

									<p>
										The Shadow application on Linux uses the VA API (Video Acceleration API) which gives a set of tools to manipulate video streams. Recent NVIDIA graphics cards hardly support VA API because NVIDIA chose to use a proprietary codec called NVdecode (NVCuvid) and NVencode. More information about it over <a href="https://developer.nvidia.com/nvidia-video-codec-sdk" target="_blank">here</a>.
									</p>

									<p>
										A workaround for Optimus equiped PC would be to use the Intel GPU instead of the NVIDIA GPU. However, this mean having worst performance because the Intel GPU is obviously less powerful. But for Shadow, most of the time, it is sufficient to decode without any glitch of lag the video and audio stream.
									</p>

									<h3>The Optimus case</h3>

									<p>
										Optimus is a technology available on laptop where a NVIDIA and a Intel GPU are setup in the computer, working successively based on the workload. It gives a better power management for small tasks but provides the computing power stay high as for heavy tasks, the computer switches automatically to the NVIDIA GPU. So it means we can use Intel GPU instead of NVIDIA GPU if you have the sticker "NVIDIA Optimus".
									</p>

									<p>
										First things first, you need to install proprietary drivers. I let you find, based on your distribution (<a href="https://websiteforstudents.com/install-proprietary-nvidia-gpu-drivers-on-ubuntu-16-04-17-10-18-04/" target="_blank">Ubuntu</a>, <a href="https://wiki.archlinux.org/index.php/NVIDIA#Installation" target="_blank">Arch Linux</a>).
									</p>

									<p style="text-align: center;">
										<span class="image"><img src="images/nvidia_prime_profiles.png" alt="" style="width: 40em;" /></span>
									</p>

									<p>
										Now open the NVIDIA X Server Settings (an application available now in your app menu) and click on "Prime profiles". You can now choose the Intel GPU. It can take a while (3 min) when you change your GPU. When the confirmation window appears, log out and in again (or reboot to be sure). Now reopen the NVIDIA X Server Settings, and you should see less options, and in the Prime profiles, the Intel GPU should be selected.
									</p>

									<p>
										All you have to do now is to <a href="./#vainfo">configure your Intel GPU for the VA-API</a>.
									</p>

									<h3>NVIDIA discrete GPU</h3>

									<p>
										If you have only an NVIDIA GPU in your computer, you will need to patch your OS first to attempt to make the NVIDIA card work with Shadow.
										<br />
										Check out this link to learn more: <a href="https://gitlab.com/aar642/libva-vdpau-driver" target="_blank">https://gitlab.com/aar642/libva-vdpau-driver</a>
									</p>

									<p>
										After patching, all you have to do now is to <a href="./#vainfo">check the specs of your GPU with the VA-API</a>.
									</p>
								</div>
							</section>

							<section class="main" id="scroll">
								<div class="content">
									<header class="major">
										<h2>The scroll is reverted</h2>
									</header>

									<p>
										The scroll can be reverted compare to your local computer. In fact, the stream transmits the double tap event so the gesture is not computed by your computer but directly sent to the Shadow.
									</p>

									<p>
										irtimiD#6396 found a tutorial to change the scrolling orientation on Windows (so on your Shadow): <a href="https://lecrabeinfo.net/inverser-scroll-sens-de-defilement-de-souris-windows.html" target="_blank">https://lecrabeinfo.net/inverser-scroll-sens-de-defilement-de-souris-windows.html</a><br />
										As it is a french tutorial, let us summarize it.
									</p>

									<p>
										To reverse the mouse scroll, the register entry FlipFlopWheel will be used. The first step is to open the Windows PowerShell with admin rights. Simply search PowerShell, right click on the right shortcut and execute it with admin rights.
									</p>

									<p>
										The are only 3 commands to manipulate this registry entry:

										<table>
											<thead>
												<tr>
													<th style="width: 12em">Result</th>
													<th>Command</th>
												</tr>
											</thead>
											<tbody>
												<tr>
													<td>Get the current value</td>
													<td>
														<code>Get-ItemProperty HKLM:\SYSTEM\CurrentControlSet\Enum\HID\*\*\Device` Parameters FlipFlopWheel -EA 0</code>
													</td>
												</tr>

												<tr>
													<td>Set to 1 (reversed)</td>
													<td>
														<code>Get-ItemProperty HKLM:\SYSTEM\CurrentControlSet\Enum\HID\*\*\Device` Parameters FlipFlopWheel -EA 0 | ForEach-Object { Set-ItemProperty $_.PSPath FlipFlopWheel 1 }</code>
													</td>
												</tr>

												<tr>
													<td>Set the 0</td>
													<td>
														<code>Get-ItemProperty HKLM:\SYSTEM\CurrentControlSet\Enum\HID\*\*\Device` Parameters FlipFlopWheel -EA 0 | ForEach-Object { Set-ItemProperty $_.PSPath FlipFlopWheel 0 }</code>
													</td>
												</tr>

											</tbody>
										</table>

									</p>

									<p>
										So if the scroll is reversed and the current version is 0, set it to 1 and vice versa. You need to <strong>reboot</strong> after modification.
									</p>
								</div>
							</section>

							<section class="main" id="strace">
								<div class="content">
									<header class="major">
										<h2>The application crashed when I try to strace (AppImage)</h2>
									</header>

									<p>
										The strace may crash the Shadow client with the AppImage. Indeed, strace disturbs the FUSE component of the AppImage used to mount it on your drive.<br />
										A workaround is to manually mount the AppImage, then start the strace on the shadow-wrapper.pl.
									</p>

									<p>
										First, mount the AppImage using the following command: <code>./shadowbeta-linux-x86_64.AppImage --appimage-mount</code>. You will get a path to a folder.
									</p>

									<p>
										From another terminal, go to this folder, and use the following command to start the strace:<br />
										<code>strace -f  ./shadow-wrapper.pl  &> /var/tmp/strace_shadowbeta && tar -zcvf ~/strace_shadowbeta.tar.gz /var/tmp/strace_shadowbeta && rm /var/tmp/strace_shadowbeta</code>
									</p>

									<p>
										Use your Shadow. When finished, close the launcher. Wait for the terminal to finish the process. When done, it should have created a archive in your user directory. This is what you should share.
									</p>

									<p>
										You may now close the first terminal to unmount the AppImage.
									</p>
								</div>
							</section>

					</div>

				<!-- Footer -->
					<footer id="footer">
						<!--
							<p>
								<ul>
									<li><a href="https://discordapp.com/invite/shadowtech" target="_blank">Discord Shadow FR</a></li>
									<li><a href="https://discordapp.com/invite/shadowen" target="_blank">Discord Shadow EN</a></li>
									<li><a href="https://discordapp.com/invite/shadowde" target="_blank">Discord Shadow DE</a></li>
									<li><a href="https://discordapp.com/invite/KRafPYV" target="_blank">Discord Shadow US</a></li>
								</ul>
							</p>
						-->
						<p class="copyright">This website and its content is not linked with the Blade company. It was made by the community to the community.</p>
						<p class="copyright">Designed by Nicolas Guilloux. This is a <a href="https://html5up.net/" target="_blank">HTML5Up</a> template.</p>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

			<script src="assets/js/highlight.pack.js"></script>
			<script>
				var codes = document.getElementsByTagName('code');
				for(var i=0; i<codes.length; i++) {
					codes[i].className += ' bash';
				}
				hljs.initHighlightingOnLoad();
			</script>

	</body>
</html>
